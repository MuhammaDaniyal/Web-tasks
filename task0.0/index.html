<!DOCTYPE html>
<html>
<head>
    <title>jQuery TODO CRUD</title>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body { font-family: Arial; padding: 20px; }
        li { margin: 6px 0; }
        .done { text-decoration: line-through; color: gray; }
        button { margin-left: 6px; }
    </style>
</head>

<body>

<h2>TODO App — GET POST PUT DELETE</h2>

<input id="taskInput" placeholder="Enter task">
<button id="addBtn">Add Task</button>

<ul id="todoList"></ul>

<script>

$(document).ready(function () {

    // -----------------------
    // GET — load first 10
    // -----------------------
    fetch("https://jsonplaceholder.typicode.com/todos")
        .then(r => r.json())
        .then(data => {
            data.slice(0,10).forEach(todo => {
                addTodoToUI(todo.id, todo.title, todo.completed);
            });
        });

    // -----------------------
    // POST — add new task
    // -----------------------
    $("#addBtn").click(function () {

        let text = $("#taskInput").val();
        if (!text) return;

        fetch("https://jsonplaceholder.typicode.com/todos", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({
                title: text,
                completed: false,
                userId: 1
            })
        })
        .then(r => r.json())
        .then(todo => {
            addTodoToUI(todo.id, todo.title, false);
            $("#taskInput").val("");
        });

    });

    // -----------------------
    // PUT — mark complete
    // -----------------------
    $("#todoList").on("click", ".completeBtn", function () {

        let li = $(this).parent();
        let id = li.data("id");

        fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
            method: "PUT",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({
                completed: true
            })
        })
        .then(r => r.json())
        .then(() => {
            li.addClass("done");
        });

    });

    // -----------------------
    // DELETE — remove
    // -----------------------
    $("#todoList").on("click", ".delBtn", function () {

        let li = $(this).parent();
        let id = li.data("id");

        fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {
            method: "DELETE"
        })
        .then(() => {
            li.remove();
        });

    });

    // -----------------------
    // UI builder
    // -----------------------
    function addTodoToUI(id, title, completed) {

        let doneClass = completed ? "done" : "";

        $("#todoList").append(`
            <li class="${doneClass}" data-id="${id}">
                ${title}
                <button class="completeBtn">✔</button>
                <button class="delBtn">X</button>
            </li>
        `);
    }

});

</script>

</body>
</html>
